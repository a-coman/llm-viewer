---
interface Props {
  response?: "Realistic" | "Unrealistic" | "Unknown" | "Doubtful" | string;
  why?: string;
}

const { response = "Unknown", why } = Astro.props;

// Normalize response casing for comparison (handles lowercase from JSON)
const normalizedResponse = response?.toLowerCase() || "unknown";

const badgeClass =
  normalizedResponse === "realistic"
    ? "badge-success"
    : normalizedResponse === "unrealistic"
      ? "badge-error"
      : "badge-unknown";

// Capitalize first letter for display
const displayResponse = response
  ? response.charAt(0).toUpperCase() + response.slice(1).toLowerCase()
  : "Unknown";
---

<div class="judge-card">
  <div class="sober-header">
    <span class="title">LLM as a Judge</span>
    <span class={`badge ${badgeClass}`}>{displayResponse}</span>
  </div>

  {
    why && (
      <div class="why">
        <p class="why-text">{why}</p>
      </div>
    )
  }
</div>

<style>
  .judge-card {
    background: var(--color-background);
    border: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
  }

  .sober-header {
    justify-content: space-between;
  }

  .badge {
    padding: 0.2rem 0.6rem;
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.025em;
  }

  .badge-success {
    background: var(--color-success-bg);
    color: var(--color-success);
    border: 1px solid var(--color-success-border);
  }

  .badge-error {
    background: var(--color-error-bg);
    color: var(--color-error);
    border: 1px solid var(--color-error-border);
  }

  .badge-unknown {
    background: var(--color-warning-bg);
    color: var(--color-warning-text);
    border: 1px solid var(--color-warning-border);
  }

  .why {
    padding: 0.75rem 1rem;
    background: var(--color-background);
  }

  .why-text {
    font-size: 0.8rem;
    color: var(--color-secondary);
    line-height: 1.5;
    margin: 0;
  }
</style>
